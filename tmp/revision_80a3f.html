<!DOCTYPE html><html lang="en"><meta charset="utf-8"><head><style>    bidy {      white-space: nowrap;    }    .writing-topic {      margin: 0.5rem 1rem;    }    .writing-topic p {      margin: 0 0 0.25rem 0;    }    insertion {      background-color: rgba(217, 240, 240, 0.6);      border-top: 3px solid transparent;      border-bottom: 3px solid transparent;    }    deletion {      background-color: rgba(239, 223, 222, 0.6);      text-decoration: line-through;      border-top: 3px solid transparent;      border-bottom: 3px solid transparent;    }    comment {      background-color: rgba(253, 247, 178, 0.3);      border-top: 3px solid transparent;      border-bottom: 3px solid transparent;    }    sup {      display: inline-block;    }        .revision-wrapper {      display: flex;      --comment-line-height: 1.375rem;    }        .revision-wrapper .revision-content {      width: 70%;      padding-right: 1rem;    }        .revision-wrapper .revision-comments {      width: 30%;      border-left: 1px solid #d0d0d0;      position: relative;    }    .revision-wrapper .revision-comments p {      margin: 0;      line-height: var(--comment-line-height);    }</style></head><body><div class="revision-wrapper">    <div class="revision-content">        <h3 style="text-align: center;">比看上去更有意思</h3><div class="material-save-enabled"><p>课，不仅仅指在学校中上课，<deletion name="real-begin:e146ccce5d28ebc4668817e179522331b">它还可以是某人<insertion name="real-begin:e0447555fc1dfd161c152145ec34d1cde"></insertion></deletion><insertion name="fake-begin:e0447555fc1dfd161c152145ec34d1cde">删除一句话后再添加</insertion>，某物交给你的道理或你从中获得的人生感悟与思考。</p><p>&nbsp;</p><p>爸爸的个子不高，<comment name="real-begin:e882debc6fbccab66b989ff7c03e1fa9b"><insertion name="real-begin:e28d7f27958d212a3a498d488a5b62679">在此处添加一句话<sup id="comment_e882debc6fbccab66b989ff7c03e1fa9b">[1]</sup></insertion></comment><insertion name="fake-begin:e28d7f27958d212a3a498d488a5b62679"></insertion>但他在我心中的形象很高大。爸爸平日里不苟言笑，只有见到爷爷奶奶是才会绽开一个又一个笑容。在奶奶离去的那天晚上，爸爸抛下了工作，顶着开夜车的疲劳急匆匆地从外地赶来。娘!没怎么哭过的爸爸跪在奶奶床前嚎啕大哭，儿子回来看您了，娘快醒醒。不知是不是奶奶听到了爸爸的呼喊声，她的手指竟动了一下。爸爸发现了，立即把奶奶抱到医院。</p><p>&nbsp;</p><p>你母亲醒过来的几率很小，我劝你还是让她回家吧，别让她在死之前还忍受病痛的折磨。躲在门后的我随着斩钉截铁的一句：不!无论机会多渺茫，都请您一定要救我母亲!我跪下来默默的哭。我不能让爸爸听到我哭，不能让爸爸在担心奶奶的同时还担心我。</p><p>&nbsp;</p><p>医生说得没错，一周半后奶奶去世了。旁人都责怪爸爸，大伯父甚至也无情的说：你当初就不应该抱妈妈到医院来，与其让她在医院里受罪，还不如在家里安心的走。爸爸抿唇，不说话。我想，我应该理解爸爸：爸爸自始至终都没有一刻想放弃奶奶，他甚至想着奶奶可能在下一刻苏醒。所以他不想放弃，也不能放弃。</p><p>&nbsp;</p><p><comment name="real-begin:e4694d89db59463d0adc6751b724244f2">爸爸给我上的这堂关于爱的课，耐人寻味。父母给予了我们那么多，甚至给了我们生命，我们无论为他们做几百件事，几千件事都不算多。现在，我想尽我最大的努力，能力为父母多做些事，用我的爱回报他们。<sup id="comment_e4694d89db59463d0adc6751b724244f2">[2]</sup></comment></p><p>&nbsp;</p><p>这<deletion name="real-begin:e344150352ef96f0f6eed6b8dbca9115c">真<insertion name="real-begin:e34978f124e7d85b5e4827bd5e3b01a11"></insertion></deletion><insertion name="fake-begin:e34978f124e7d85b5e4827bd5e3b01a11">比看上去更</insertion>有意思!<insertion name="real-begin:ef1a64592797f37b6623e1515d0ff304b">在末尾添加时，可能产生冗余空格</insertion></p></div>        <div style="color: rgb(190, 82, 223); user-select: none;">综合评价：</div><div class="writing-overall">添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价添加了一段综合评价</div>    </div>    <div class="revision-comments">        <h3 style="padding-left: 1rem;">批注</h3>    </div></div></body><script>const commentThreads = JSON.parse("{\"commentThreadsData\":[{\"threadId\":\"e4694d89db59463d0adc6751b724244f2\",\"comments\":[{\"commentId\":\"eeb443634db8b570826f07e2f8753dbe4\",\"content\":\"<p>这段写得很好</p>\",\"createdAt\":\"2022-10-05T08:12:26.171Z\",\"authorId\":\"1\",\"attributes\":{}}]},{\"threadId\":\"e882debc6fbccab66b989ff7c03e1fa9b\",\"comments\":[{\"commentId\":\"ee03a3d67e80a1821684549f21ac54e5e\",\"content\":\"<p>这里添加这句话是因为...</p>\",\"createdAt\":\"2022-10-05T08:47:55.898Z\",\"authorId\":\"1\",\"attributes\":{}}]}],\"suggestions\":[{\"id\":\"e344150352ef96f0f6eed6b8dbca9115c\",\"type\":\"deletion\",\"authorId\":\"1\",\"createdAt\":\"2022-10-05T08:03:56.324Z\",\"hasComments\":false,\"data\":null,\"attributes\":{}},{\"id\":\"e34978f124e7d85b5e4827bd5e3b01a11\",\"type\":\"insertion\",\"authorId\":\"1\",\"createdAt\":\"2022-10-05T08:03:58.359Z\",\"hasComments\":false,\"data\":null,\"attributes\":{}},{\"id\":\"e146ccce5d28ebc4668817e179522331b\",\"type\":\"deletion\",\"authorId\":\"1\",\"createdAt\":\"2022-10-05T08:05:45.201Z\",\"hasComments\":false,\"data\":null,\"attributes\":{}},{\"id\":\"e28d7f27958d212a3a498d488a5b62679\",\"type\":\"insertion\",\"authorId\":\"1\",\"createdAt\":\"2022-10-05T08:05:51.070Z\",\"hasComments\":false,\"data\":null,\"attributes\":{}},{\"id\":\"e0447555fc1dfd161c152145ec34d1cde\",\"type\":\"insertion\",\"authorId\":\"1\",\"createdAt\":\"2022-10-05T08:06:10.858Z\",\"hasComments\":false,\"data\":null,\"attributes\":{}},{\"id\":\"ef1a64592797f37b6623e1515d0ff304b\",\"type\":\"insertion\",\"authorId\":\"1\",\"createdAt\":\"2022-10-05T08:07:22.732Z\",\"hasComments\":false,\"data\":null,\"attributes\":{}}]}").commentThreadsData;console.log(commentThreads);const commentContents = commentThreads.map(thread => ({        threadId: thread.threadId,        content: "<p><span>" + document.querySelector("#comment_" + thread.threadId).innerHTML + "</span>" + thread.comments[0].content.slice(3),    }));commentContents.forEach(comment => {   document.querySelector(".revision-comments").innerHTML += "<div style=\"visibility: hidden;\" id=\"comment_item_" + comment.threadId + "\">" + comment.content + "</div>";});let comments = commentThreads.map(thread => {        const commentSupDom = document.querySelector("#comment_" + thread.threadId);        const hiddenDom = document.querySelector("#comment_item_" + thread.threadId);        const rect = commentSupDom.getBoundingClientRect();        console.log(rect.top);        console.log(rect.right);        console.log(hiddenDom.getBoundingClientRect().top);        return {            threadId: thread.threadId,            content: "<p><span>" + commentSupDom.innerHTML + "</span>" + thread.comments[0].content.slice(3),            top: rect.top,            left: rect.left,            height: hiddenDom.getBoundingClientRect().height,        }    }).sort((a, b) => a.top - b.top || a.left - b.left);comments.forEach(comment => {    console.log(comment.left);});let currentHeight = 0;comments.forEach((comment, index) => {    const leastTop = comment.top - document.querySelector(".revision-comments").getBoundingClientRect().top;    const top = currentHeight > leastTop ? currentHeight : leastTop;    currentHeight = top + comment.height;    document.querySelector(".revision-comments").innerHTML += "<div style=\"position: absolute; top: " + top + "px;\" >" + comment.content + "</div>";})</script></html>